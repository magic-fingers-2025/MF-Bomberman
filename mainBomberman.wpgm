import wollok.game.*
import Magic.*

program mainBomberman {

	game.title("MF - Bomberman")
	game.width(15)
	game.height(13)
	game.boardGround("fondo.jpg")

	// Inicializamos las posiciones prohibidas
	posicionesProhibidas.inicializar(game)

	// ðŸ‘¦ Instanciamos al jugador principal
	const player = new Bomberman(position = game.at(2, 2), game = game)
	game.addVisualCharacter(player)
	game.showAttributes(player)

	// ðŸ‘¾ Enemigos
	const enemigos = [
		new Enemigo(numero = 1, position = game.at(3, 3), game = game),
		new Enemigo(numero = 2, position = game.at(11, 9), game = game)
	]
	enemigos.forEach { e => game.addVisual(e) }

	// ðŸŽ® Controles del jugador (player ya estÃ¡ definido antes)
	keyboard.up().onPressDo({ player.moverA(player.position().up()) })
	keyboard.down().onPressDo({ player.moverA(player.position().down()) })
	keyboard.left().onPressDo({ player.moverA(player.position().left()) })
	keyboard.right().onPressDo({ player.moverA(player.position().right()) })
	keyboard.space().onPressDo({ player.colocarBomba() })

	// ðŸ” Movimiento automÃ¡tico de enemigos
	game.onTick(800, "moverEnemigos", {
		enemigos.forEach { e => e.moverAleatorio() }
	})

	game.start()
}
